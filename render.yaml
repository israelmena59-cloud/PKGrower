# Render Configuration - BACKEND ONLY
# Frontend is now served from Firebase Hosting (pk-grower.web.app)
services:
  - type: web
    name: pkgrower
    env: node
    plan: free
    # Backend only - no frontend build needed
    buildCommand: |
      cd backend && npm install && npx puppeteer browsers install chrome
    startCommand: cd backend && node index.js
    envVars:
      # CORS allowed origins (Firebase frontend)
      - key: CORS_ORIGIN
        value: https://pk-grower.web.app
      # Tuya credentials
      - key: TUYA_ACCESS_KEY
        sync: false
      - key: TUYA_SECRET_KEY
        sync: false
      - key: TUYA_DEVICE_ID
        sync: false
      # Gemini AI
      - key: API_KEY
        sync: false
      # Puppeteer configuration
      - key: PUPPETEER_CACHE_DIR
        value: /opt/render/.cache/puppeteer
      - key: PUPPETEER_HEADLESS
        value: "true"
